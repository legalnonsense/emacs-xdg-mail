

For various reasons, I could not get the .desktop files that come with Emacs to work with mailto: links with my mu4e and org-msg set up. I also could not get =browse-url-mail= or =rfc6068-parse-mailto-url= to work correctly with mailto urls generated by my system. This fixes that problem. 

If followed, these steps will save you seconds per week:

1. Copy the =emacs-mail.desktop= file to =/​usr/share/applications/= or wherever your .desktop files are stored.
2. Tell xdg to use that .desktop file: =$ xdg-settings set default-url-scheme-handler mailto emacs-mail.desktop=
3. Make sure it worked: ~$ xdg-mime query default 'x-scheme-handler/mailto'~
4. If you have problems with xdg recognizing the changes and still using the old emacs-mail.desktop file, try running =$ xdg-desktop-menu install emacs-mail.desktop=. I don't know what it does but it seemed to force xdg to refresh.)
5. Copy =emacs-xdg-email.sh= into your path and make sure it is executable.
6. Make sure you =(server-start)= in Emacs as the bash script uses emacsclient. If you don't want to use emacsclient then edit the bash file accordingly. 
7. Test it in your terminal: =$ emacs-xdg-email.sh mailto:myself= should open a new email.
8. This should make mailto: links work system wide (file manager, libreoffice (via File -> Send -> Email web browser, etc.), but if you are using KDE, XFCE, Gnome, etc., there may be an additional way to set the default mail application in the DE’s settings manager aside from using the .desktop file. If so, simply set it to =emacs-xdg-email.sh=. 



